<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>weather</title>
    <script src="http://code.jquery.com/jquery-3.1.1.js"></script>
    <script>

    //     $.getJSON("demo_ajax_json.js", function(result){
    //      $.each(result, function(i, field){
    //        $("div").append(field + " ");
    //     });
    // });

    $.getJSON('http://api.openweathermap.org/data/2.5/weather?id=1897007&appid=32cc72d5b74eb1160b5b6c35471f02e9&units=metric',function(data){



        // forecast 예보를 - weather
        //현재 온도
        //최고 온도
        //최저 온도
        // 아이콘
  

       var $cTemp = data.main.temp;
       var $maxTemp = data.main.temp_max;
       var $minTemp = data.main.temp_min;
       var $wIcon = data.weather[0].icon;

        $('.ctemp').append($cTemp); 
        $('.chightemp').append($maxTemp);
        $('.clowtemp').append($minTemp);
      //date()메서드 이용해서 년월
      //2024/02/28 12:30 까지 나오도록
        $('.cicon').append('<img src="https://openweathermap.org/img/wn/'+$wIcon+'@2x.png" alt="">');
      //  $('.cicon').append(`<img src="https://openweathermap.org/img/wn/${$wIcon}@2x.png">`); // 위랑 같음


       var $now = new Date();


     //  var $cDate = new Date().toLocaleDateString(); 날짜만 나옴


    // 한국 로케일인 "ko-KR"에서는 월/일/년 형식으로 표시하는 것이 일반적입니다. 따라서 한국 로케일로 바꾸려면 다음과 같이 할 수 있습니다:

     var $cDate = new Date().toLocaleString('ko-KR', { year: 'numeric', month: '2-digit', day: '2-digit', hour: '2-digit', minute: '2-digit' });
       
    //    var $cDate = $now.getFullYear() + '/' + ($now.getMonth()+1) +'/'+$now.getDate()+' '+ $now.getHours() +' : '+$now.getMinutes(); // 하나씩 쓰자면
    //    alert($cDate);
        $('h2').prepend($cDate);


    });



    </script>
</head>
<body>
    <h1>weather api</h1>
    <h2> - 날씨예보</h2>
    <div class="ctemp">현재 온도 : </div>
    <div class="clowtemp">최저 온도 : </div>
    <div class="chightemp">최고 온도 : </div>
    <div class="cicon">아이콘 : </div>
    <!-- <img src="https://openweathermap.org/img/wn/10d@2x.png" alt=""> -->
</body>
</html>